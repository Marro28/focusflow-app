<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusFlow - Anti-Procrastinazione</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Font studente -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Font professionista -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-student.css" id="theme-student" disabled>
    <link rel="stylesheet" href="style-professional.css" id="theme-professional" disabled>
</head>
<body>
    <!-- Progress Tracker (appare dopo selezione profilo) -->
    <div id="progress-tracker" class="progress-tracker" style="display: none;">
        <div class="progress-step" data-step="1">
            <span class="step-number">1</span>
            <span class="step-label">Make it Obvious</span>
        </div>
        <div class="progress-step" data-step="2">
            <span class="step-number">2</span>
            <span class="step-label">Make it Easy</span>
        </div>
        <div class="progress-step" data-step="3">
            <span class="step-number">3</span>
            <span class="step-label">Make it Satisfying</span>
        </div>
    </div>

    <!-- SCHERMATA 1: Selezione Profilo -->
    <div id="screen-profile" class="screen active">
        <div class="container">
            <h1>Benvenuto in FocusFlow</h1>
            <p class="subtitle">Crea abitudini di lavoro solide, un pomodoro alla volta</p>
            <p class="subtitle-small">Scegli il tuo stile</p>
            <div class="profile-selection">
                <button class="profile-btn" data-profile="student">
                    <span class="icon">üìö</span>
                    <span class="profile-name">Studente</span>
                    <span class="profile-desc">Design energico e motivante</span>
                    <div class="profile-preview">
                        <div class="preview-color color-student"></div>
                    </div>
                </button>
                <button class="profile-btn" data-profile="professional">
                    <span class="icon">üíº</span>
                    <span class="profile-name">Professionista</span>
                    <span class="profile-desc">Design minimal e produttivo</span>
                    <div class="profile-preview">
                        <div class="preview-color color-professional"></div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- SCHERMATA 2: Costruzione Rituale -->
    <div id="screen-ritual-builder" class="screen">
        <div class="container-wide">
            <div class="screen-header">
                <h2>Make it Obvious</h2>
                <p class="subtitle">Costruisci il tuo rituale pre-lavoro: rendi l'abitudine impossibile da ignorare</p>
            </div>
            
            <div class="ritual-builder">
                <!-- Colonna sinistra: Menu fisso consigliato -->
                <div class="menu-column">
                    <h3>üçΩÔ∏è Menu consigliato</h3>
                    <p class="helper-text">Rituali pronti per te</p>
                    <div id="recommended-rituals"></div>
                </div>

                <!-- Colonna centrale: Ingredienti individuali -->
                <div class="ingredients-column">
                    <h3>üõí Ingredienti disponibili</h3>
                    <p class="helper-text">Aggiungi al tuo carrello</p>
                    <div id="ingredients-list"></div>
                </div>

                <!-- Colonna destra: Carrello -->
                <div class="cart-column">
                    <h3>‚úÖ Il tuo carrello</h3>
                    <p class="helper-text" id="cart-count">0 azioni selezionate</p>
                    <div id="cart-items"></div>
                    <button id="btn-add-custom" class="btn-secondary">+ Aggiungi azione personalizzata</button>
                </div>
            </div>

            <div class="navigation-buttons">
                <button id="btn-back-profile" class="btn-secondary">‚Üê Cambia profilo</button>
                <button id="btn-next-timer" class="btn-primary" disabled>Continua ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- SCHERMATA 3: Impostazioni Timer -->
    <div id="screen-timer-settings" class="screen">
        <div class="container">
            <div class="screen-header">
                <h2>Make it Easy</h2>
                <p class="subtitle">Imposta il timer perfetto per te: riduci l'attrito, aumenta l'azione</p>
            </div>
            
            <div class="timer-presets">
                <h3>‚ö° Preset consigliati</h3>
                <div id="timer-presets-list"></div>
            </div>

            <div class="timer-custom">
                <h3>üéõÔ∏è Personalizza</h3>
                <div class="timer-inputs">
                    <div class="input-group">
                        <label>Lavoro (minuti)</label>
                        <input type="number" id="work-duration" min="5" max="90" value="25">
                    </div>
                    <div class="input-group">
                        <label>Pausa breve (minuti)</label>
                        <input type="number" id="short-break" min="1" max="15" value="5">
                    </div>
                    <div class="input-group">
                        <label>Pausa lunga (minuti)</label>
                        <input type="number" id="long-break" min="10" max="30" value="15">
                    </div>
                </div>
            </div>

            <div class="music-selection">
                <h3>üéµ Musica di concentrazione</h3>
                <div class="music-options">
                    <label class="music-option">
                        <input type="radio" name="music" value="none" checked>
                        <span>Nessuna musica</span>
                    </label>
                    <label class="music-option">
                        <input type="radio" name="music" value="lofi">
                        <span>Lofi Hip Hop</span>
                    </label>
                    <label class="music-option">
                        <input type="radio" name="music" value="ambient">
                        <span>Ambient</span>
                    </label>
                    <label class="music-option">
                        <input type="radio" name="music" value="nature">
                        <span>Suoni della natura</span>
                    </label>
                    <label class="music-option">
                        <input type="radio" name="music" value="classical">
                        <span>Classica</span>
                    </label>
                    <label class="music-option">
                        <input type="radio" name="music" value="whitenoise">
                        <span>White noise</span>
                    </label>
                </div>
                <p class="helper-text">üí° La musica partir√† all'inizio del timer</p>
            </div>

            <div class="navigation-buttons">
                <button id="btn-back-ritual" class="btn-secondary">‚Üê Modifica rituale</button>
                <button id="btn-start-ritual" class="btn-primary">Inizia il rituale ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- SCHERMATA 4: Esecuzione Rituale (Checklist) -->
    <div id="screen-ritual-execution" class="screen">
        <div class="container">
            <div class="screen-header">
                <h2>Make it Obvious</h2>
                <p class="subtitle">Completa il tuo rituale: ogni azione √® un voto per il tipo di persona che vuoi diventare</p>
            </div>
            
            <div class="ritual-checklist" id="ritual-checklist"></div>

            <div class="ritual-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="ritual-progress"></div>
                </div>
                <p id="ritual-progress-text">0 di 0 completate</p>
            </div>

            <button id="btn-start-timer" class="btn-primary btn-large" disabled>
                üöÄ Avvia il timer Pomodoro
            </button>
        </div>
    </div>

    <!-- SCHERMATA 5: Timer Pomodoro attivo -->
    <div id="screen-timer" class="screen">
        <div class="container">
            <div class="identity-banner" id="identity-banner">
                Sei una persona che si presenta al lavoro ogni giorno
            </div>

            <div class="timer-display">
                <div class="timer-phase" id="timer-phase">Sessione di lavoro</div>
                <div class="timer-visual">
                    <svg class="timer-ring" width="300" height="300">
                        <circle class="timer-ring-bg" cx="150" cy="150" r="140" />
                        <circle class="timer-ring-progress" id="timer-ring-progress" cx="150" cy="150" r="140" />
                    </svg>
                    <div class="timer-countdown" id="timer-countdown">25:00</div>
                </div>
                <div class="timer-pomodoros">
                    <span id="pomodoro-count">0</span> üçÖ completati oggi
                </div>
            </div>

            <div class="timer-controls">
                <button id="btn-pause" class="btn-secondary">‚è∏Ô∏è Pausa</button>
                <button id="btn-resume" class="btn-secondary" style="display:none;">‚ñ∂Ô∏è Riprendi</button>
                <button id="btn-stop" class="btn-danger">‚èπÔ∏è Interrompi</button>
            </div>

            <div class="music-controls" id="music-controls" style="display:none;">
                <button id="btn-music-toggle" class="btn-music">üîä Musica ON</button>
                <input type="range" id="volume-slider" min="0" max="100" value="50" class="volume-slider">
            </div>

            <div class="current-task" id="current-task">
                <p><strong>Focus:</strong> <span id="task-name">One pomodoro at a time</span></p>
            </div>
        </div>
    </div>

    <!-- SCHERMATA 6: Fine Sessione / Recap -->
    <div id="screen-recap" class="screen">
        <div class="container">
            <div class="screen-header">
                <h2>Make it Satisfying</h2>
                <p class="subtitle">Celebra il progresso: ogni ripetizione rafforza la tua identit√†</p>
            </div>
            
            <div class="celebration" id="celebration">
                <div class="celebration-emoji">üéâ</div>
                <h3>Ottimo lavoro!</h3>
            </div>

            <div class="recap-stats">
                <div class="stat-card">
                    <div class="stat-number" id="recap-pomodoros">0</div>
                    <div class="stat-label">Pomodori oggi</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="recap-streak">0</div>
                    <div class="stat-label">Giorni di fila</div>
                </div>
            </div>

            <div class="recap-chart">
                <h3>üìä Ultimi 7 giorni</h3>
                <div id="week-chart"></div>
            </div>

            <div class="navigation-buttons">
                <button id="btn-new-session" class="btn-primary btn-large">Inizia nuova sessione</button>
                <button id="btn-reset-all" class="btn-danger">Reset completo</button>
            </div>
        </div>
    </div>

    <!-- Audio players (nascosti) -->
    <audio id="audio-player" loop></audio>

    <script src="app.js"></script>
</body>
</html>
